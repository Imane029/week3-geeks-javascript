<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Mad Libs</title>
  <style>
    body {
        font-family: Arial, sans-serif;
        background-color: #e9e9e9;
        margin: 0;
        padding: 20px;
        display: flex;
        flex-direction: column;
        align-items: center;
        text-align: center;
    }
    
    h1 {
        color: #333;
    }

    form {
        background: #fff;
        padding: 20px;
        border-radius: 8px;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        width: 100%;
        max-width: 400px;
        margin-bottom: 20px;
    }

    label {
        display: block;
        text-align: left;
        margin-bottom: 5px;
        font-weight: bold;
    }

    input[type="text"] {
        width: 100%;
        padding: 8px;
        margin-bottom: 10px;
        box-sizing: border-box;
        border: 1px solid #ccc;
        border-radius: 4px;
    }

    button {
        width: 100%;
        padding: 10px;
        font-size: 16px;
        color: #fff;
        background-color: #333;
        border: none;
        border-radius: 4px;
        cursor: pointer;
        margin-top: 10px;
    }

    button:hover {
        background-color: #555;
    }

    #story-container {
        margin-top: 20px;
        background-color: #fff;
        padding: 20px;
        border-radius: 8px;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        width: 100%;
        max-width: 600px;
    }
    
    #story {
        font-style: italic;
        line-height: 1.6;
        color: #555;
    }

    #shuffle-button {
        display: none;
    }
  </style>
 </head>
 <body>

    <h1>Mad Libs</h1>

    <form id="libform">
        <label for="noun">Nom:</label><input type="text" id="noun"><br>
        <label for="adjective">Adjectif:</label><input type="text" id="adjective"><br>
        <label for="person">Nom de quelqu'un:</label><input type="text" id="person"><br>
        <label for="verb">Verbe:</label><input type="text" id="verb"><br>
        <label for="place">Un lieu:</label><input type="text" id="place"><br>
        <button id="lib-button">Lib it!</button>
    </form>
    
    <div id="story-container">
        <p>Histoire générée: 
            <span id="story"></span>
        </p>
    </div>
    
    <button id="shuffle-button">Mélanger l'histoire !</button>

    <script>
        let userValues = {};
        
        const form = document.getElementById('libform');
        const inputs = form.querySelectorAll('input[type="text"]');
        const storySpan = document.getElementById('story');
        const shuffleButton = document.getElementById('shuffle-button');

        const stories = [
            `L'autre jour, j'ai vu un <strong>{noun}</strong> très <strong>{adjective}</strong>. Il a <strong>{verb}</strong> avec {person} au <strong>{place}</strong>. C'était une expérience inoubliable !`,
            `Un <strong>{adjective}</strong> <strong>{noun}</strong> a décidé de <strong>{verb}</strong> avec {person} dans le <strong>{place}</strong>. La foule était en liesse !`,
            `Dans un <strong>{place}</strong>, {person} a trouvé un <strong>{noun}</strong> qui était si <strong>{adjective}</strong> qu'il a décidé de <strong>{verb}</strong> avec lui. C'était la chose la plus étrange qu'il ait jamais vue.`
        ];
        
        let lastStoryIndex = -1; 

        function generateStory() {
            let randomIndex;
            do {
                randomIndex = Math.floor(Math.random() * stories.length);
            } while (randomIndex === lastStoryIndex);

            lastStoryIndex = randomIndex;
            
            let storyTemplate = stories[randomIndex];
            
            storyTemplate = storyTemplate.replace('{noun}', userValues.noun);
            storyTemplate = storyTemplate.replace('{adjective}', userValues.adjective);
            storyTemplate = storyTemplate.replace('{person}', userValues.person);
            storyTemplate = storyTemplate.replace('{verb}', userValues.verb);
            storyTemplate = storyTemplate.replace('{place}', userValues.place);
            
            storySpan.innerHTML = storyTemplate;
            
            shuffleButton.style.display = 'block';
        }

        form.addEventListener('submit', function(event) {
            event.preventDefault();

            let allFieldsFilled = true;
            inputs.forEach(input => {
                const value = input.value.trim();
                userValues[input.id] = value;
                if (!value) {
                    allFieldsFilled = false;
                }
            });

            if (allFieldsFilled) {
                generateStory();
            } else {
                alert("Veuillez remplir tous les champs !");
            }
        });

        shuffleButton.addEventListener('click', function() {
            if (Object.keys(userValues).length > 0) {
                generateStory();
            }
        });
    </script>
 </body>
</html>